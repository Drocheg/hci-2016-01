<!DOCTYPE html>
<html lang="en" data-ng-app="app" data-ng-controller="controller" data-ng-init="searchFlights('total', 'asc')">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
        <title>Vuelos - Página de Vuelos</title>

        <!-- CSS  -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
        <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    </head>
    <body>

        <header>
            <nav class="light-blue lighten-1" role="navigation" data-ng-include="'includes/nav.html'"></nav>
        </header>

        <main>        
            <div class="section" style="min-height: 1300px;">
                <div class="row">
                    <div class="col s4" style="position: absolute;">
                        <div class="row">
                            <div class="col s12">
                                <div class="card-panel white black-text" id="searchParams">
                                    <div class="row">
                                        <h5 class="center">Su Búsqueda</h5>
                                    </div>
                                    <div class="row">    
                                        <form id="flightSearchForm">
                                            <div class="input-field col s12">
                                                <input id="from" type="text" class="validate">
                                                <label for="from">Origen</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="to" type="text" class="validate">
                                                <label for="to">Destino</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="oneWayTrip" type="checkbox">
                                                <label for="oneWayTrip">Sólo Ida</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="departDate" type="date" class="datepicker">
                                                <label for="departDate">Ida</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="returnDate" type="date" class="datepicker">
                                                <label for="returnDate">Vuelta</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="numAdults" type="number" class="validate" value="1">
                                                <label for="numAdults">Adultos (12 o más años)</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="numChildren" type="number" class="validate" value="0">
                                                <label for="numChildren">Niños (2-11 años)</label>
                                            </div>
                                            <div class="input-field col s12">
                                                <input id="numInfants" type="number" class="validate" value="0">
                                                <label for="numInfants">Infantes (0-2 años)</label>
                                            </div>
                                            <button class="input-field col s8 offset-s2 waves-effect waves-light btn-large" type='button' id="searchButton">
                                                Buscar de Nuevo<i class="material-icons right">arrow_right</i>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="col s12">
                                <div class="card-panel white black-text">
                                    <p class="center">Ordenar Por</p>
                                    <div class="row">
                                        <div class="input-field col s6">
                                            <select data-ng-model="criteria">
                                                <option selected value="total">Precio</option>
                                                <option value="airline">Aerolinea</option>
                                                <option value="duration">Duración</option>
                                            </select>
                                        </div>
                                        <div class="input-field col s6">
                                            <select id="order" data-ng-model="order" >
                                                <option selected value="asc">Ascendente</option>
                                                <option value="desc">Descendente</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <button class="col s8 offset-s2 btn" data-ng-click="searchFlights(criteria, order)">Aplicar</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col s12">
                                <div class="card-panel white black-text">
                                    <p class="center">Vuelos por página</p>
                                    <div class="row">
                                        <div class="input-field col s6 offset-s3">
                                            <select>
                                                <option selected>25</option>
                                                <option>50</option>
                                                <option>42</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <button class="col s8 offset-s2 btn">Aplicar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col s8 offset-s4">
                        <div class="col s8">
                            <div class="card-panel grey lighten-1 white-text center" style="border-color:grey; border-style: dashed;">
                                Ida
                            </div>
                        </div>
                        <div class="col s4 center">
                            <h5 style="margin-top: 35px;">
                                <b>Total: $0</b>
                            </h5>
                        </div>
                        <div class="col s8">
                            <div class="card-panel grey lighten-1 white-text center" style="border-color:grey; border-style: dashed;">
                                Vuelta
                            </div>
                        </div>
                        <div class="col s4 center">
                            <button class="btn disabled" style="margin-top: 20px;">Elegir Vuelta <i class="material-icons right">arrow_right</i></button>
                        </div>

                        <div class="row">
                            <div class="col s12 divider"></div>
                        </div>
                        <div class="row">
                            <div class="col s12 center"><span style="font-size: large;">{{flights.total}} vuelos encontrados</span></div>
                        </div>

                        <!--VUELOS-->
                        <div class="card-panel blue white-text" data-ng-repeat="flight in flights.flights">
                            ${{flight.price.total.total}} {{flight.outbound_routes[0].segments[0].airline.name}} {{flight.outbound_routes[0].duration}} 
                        </div>



                        <div class="col s12">
                            <ul class="collapsible" data-collapsible="accordion">
                                <li class="grey">
                                    <div class="collapsible-header flight-card-header">
                                        <div class="col s4">
                                            <i class="material-icons">airplanemode_active</i>TAM #1132, TAM #1558
                                        </div>
                                        <div class="col s3">
                                            EZE (09:50)<span class="material-icons">forward</span>JFK (22:28)
                                        </div>
                                        <div class="col s1">
                                            1 Escala
                                        </div>
                                        <div class="col s2 right-align">
                                            $517
                                        </div>
                                        <div class="col s2 right-align">
                                            <button class='btn'>Seleccionar</button>
                                        </div>
                                    </div>
                                    <div class="collapsible-body flight-card-body">
                                        <p style="height:100px;padding: 5px;padding-left: 10px;">
                                            <span class="col s4 center">
                                                Calificación: 7.3/10
                                                <br />
                                                (promedio tramos)
                                                <br />
                                                <button class="btn"><a href="reviews.html">Ver Comentarios</a></button>
                                            </span>
                                            <span class="col s3">
                                                EZE (09:50) <span class="material-icons">forward</span> GRU (13:02)
                                                <br />
                                                GRU (13:45) <span class="material-icons">forward</span> JFK (23:50)
                                            </span>
                                            <span class="col s1 center">
                                                Duración: 14:00
                                            </span>
                                            <span class="col s4 center">
                                                Adultos: $250 x 2
                                                <br />
                                                Infantes: $15 x 1
                                                <br />
                                                Cargos e Impuestos: $2
                                                <br />
                                                <b>Total Pasajeros: $517</b>
                                            </span>
                                        </p>
                                    </div>
                                </li>

                                <li class="grey">
                                    <div class="collapsible-header flight-card-header">
                                        <div class="col s4">
                                            <i class="material-icons">airplanemode_active</i>LAN #3258
                                        </div>
                                        <div class="col s3">
                                            EZE (08:35)<span class="material-icons">forward</span> JFK (14:50)
                                        </div>
                                        <div class="col s1">
                                            Directo
                                        </div>
                                        <div class="col s2 right-align">
                                            $617
                                        </div>
                                        <div class="col s2 right-align">
                                            <button class='btn'>Seleccionar</button>
                                        </div>
                                    </div>
                                    <div class="collapsible-body">
                                        <p style="height:100px;padding: 5px;padding-left: 10px;">
                                            <span class="col s4 center">
                                                Calificación: 8/10
                                                <br />
                                                <button class="btn">Ver Comentarios</button>
                                            </span>
                                            <span class="col s3">
                                                EZE (08:35)<span class="material-icons">forward</span> JFK (14:50)
                                            </span>
                                            <span class="col s1 center">
                                                Duración: 11:15
                                            </span>
                                            <span class="col s4 center">
                                                Adultos: $300 x 2
                                                <br />
                                                Infantes: $15 x 1
                                                <br />
                                                Cargos e Impuestos: $2
                                                <br />
                                                <b>Total Pasajeros: $617</b>
                                            </span>
                                        </p>
                                    </div>
                                </li>

                                <li class="grey">
                                    <div class="collapsible-header flight-card-header">
                                        <div class="col s4">
                                            <i class="material-icons">airplanemode_active</i>Aerolíneas Argentinas #667
                                        </div>
                                        <div class="col s3">
                                            EZE (09:25)<span class="material-icons">forward</span> JFK (16:52)
                                        </div>
                                        <div class="col s1">
                                            Directo
                                        </div>
                                        <div class="col s2 right-align">
                                            $750
                                        </div>
                                        <div class="col s2 right-align">
                                            <button class='btn'>Seleccionar</button>
                                        </div>
                                    </div>
                                    <div class="collapsible-body">
                                        <p style="height:100px;padding: 5px;padding-left: 10px;">
                                            <span class="col s4 center">
                                                Calificación: 8.36/10
                                                <br />
                                                <button class="btn">Ver Comentarios</button>
                                            </span>
                                            <span class="col s3">
                                                EZE (08:35)<span class="material-icons">forward</span> JFK (14:50)
                                            </span>
                                            <span class="col s1 center">
                                                Duración: 09:23
                                            </span>
                                            <span class="col s4 center">
                                                Adultos: $367 x 2
                                                <br />
                                                Infantes: $15 x 1
                                                <br />
                                                Cargos e Impuestos: $1
                                                <br />
                                                <b>Total Pasajeros: $750</b>
                                            </span>
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <!--PAGINATION-->
                        <div class="row">
                            <div class="col s12 center">
                                <ul class="pagination">
                                    <li class="disabled"><a href="#!"><i class="material-icons">chevron_left</i></a></li>
                                    <li class="active"><a href="#!">1</a></li>
                                    <li class="waves-effect"><a href="#!">2</a></li>
                                    <li class="waves-effect"><a href="#!">3</a></li>
                                    <li class="waves-effect"><a href="#!">4</a></li>
                                    <li class="waves-effect"><a href="#!">5</a></li>
                                    <li class="waves-effect"><a href="#!"><i class="material-icons">chevron_right</i></a></li>
                                </ul>
                            </div>
                        </div>
                        <!--/PAGINATION-->
                    </div>
                </div>
            </div>
        </main>

        <footer class="page-footer blue" data-ng-include="'includes/footer.html'"></footer>

        <!--  Scripts-->
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script src="js/materialize.js"></script>
        <script src="js/init.js"></script>
        <script src='js/angular.min.js'></script>
        <script src='js/controllers.js'></script>
        <script src="js/angular-materialize.js"></script>

        <script src="js/flights.js"></script>  
    </body>
</html>
